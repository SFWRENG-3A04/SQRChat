# Welcome to SQRChat

SQRChat is a dedicated communication platform that ensures secure team collaboration. Featuring Key Distribution Center (KDC) encryption, SQRChat is designed to keep sensitive conversations private and internal.

## Unique Features

- **Profile Customization:** Add your personal touch with a customizable profile picture.
- **Availability Status:** Use the toggle switch to show your current availability status.
- **Password Management:** Change your password anytime for increased account security.
- **Message Management:** Delete messages to keep your conversation history clean.
- **Expressive Interactions:** React to messages with emojis for dynamic communication.
- **Real-Time Messaging:** Employ websockets for live chat without delays.

## Prerequisites
- **Tailscale Installation:** Install [Tailscale](https://tailscale.com/) on both your smartphone and computer to ensure a secure network for the backend.
- **Tailscale Account:** Create an account on Tailscale and login on to both devices to ensure seamless connection with our backend services. Follow Tailscale's documentation to connect your devices to your private network. This step is important for maintaining a secure communication channel between the client and server components of SQRChat.
- **Expo Go:** For mobile development and testing, install the [Expo Go](https://expo.dev/client) app on your smartphone. This will allow you to run the application on your mobile device by scanning the QR code generated by Expo during the development process.
- **Node.js and npm:** Ensure that [Node.js](https://nodejs.org/) and npm (Node Package Manager) are installed on your system. npm comes with Node.js, and it's essential for managing the dependencies of the project.
- **Python:** [Python](https://www.python.org/downloads/) must be installed to run the backend components of SQRChat. Make sure to add Python to your system's PATH during installation.


## Environment Configuration
1. Create a `.env` file in the frontend directory by duplicating the .env_example file and rename the copy to `.env`.
2. Configure the backend endpoint in `.env` by specifying your unique Tailscale address. In your Tailscale network, you should see two devices listed(your laptop and phone). Use the address associated with the laptop or the device intended to host your backend.
3. Open the .env file and adjust the variables with your Firebase configurations as shown below(We have provided the credentials for the .env file on the USB):

```
EXPO_PUBLIC_BACKEND_IP="your_tailscale_ip"

EXPO_PUBLIC_API_KEY="your_firebase_api_key"
EXPO_PUBLIC_AUTH_DOMAIN="your_firebase_auth_domain"
EXPO_PUBLIC_PROJECT_ID="your_firebase_project_id"
EXPO_PUBLIC_STORAGE_BUCKET="your_firebase_storage_bucket"
EXPO_PUBLIC_MESSAGING_SENDER_ID="your_firebase_messaging_sender_id"
EXPO_PUBLIC_APP_ID="your_firebase_app_id"
```
Ensure you replace the placeholders with your actual data.


## Backend Setup

To set up the backend services, follow these instructions:

```bash
cd backend
pip install -r requirements.txt
python app.py
```
## Frontend Setup

For the frontend configuration, proceed with these steps:
```
cd frontend
npm install
npx expo start
```
After running the commands, scan the QR code on your phone from the terminal. This should launch the app on your smartphone.
## Sample Code Snippets

### Database Interaction

#### Real-Time Database Updates

Listen for live updates in the 'messages' collection with the user's UID key for anytime it updates in the DB
```
  onValue(
    ref(db, "messages/" + uid),
    (snapshot) => {
      if (snapshot.exists()) {
        setMessages(snapshot.val());
      }
    }
  );
```

#### On-Demand Data Retrieval

Fetch group information from the database using the group UID. 
```
  const getGroup = async (groupuid) => {
    const dbRef = ref(db);
    const snapshot = await get(child(dbRef, "groups/" + groupuid));

    if (!snapshot.exists() || snapshot.val() == "none") {
        // console.log(snapshot.val().name)
        return snapshot.val().name;
    }
  }
```

#### Updating Database Records

Update the user's group information in the database.
```
  const joinTeam = async (groupuid) => {
    set(ref(db, "users/" + uid + "/group"), 
      groupuid
    );
  }
```
---

Leverage SQRChat's robust features for a seamless and secure communication experience within your team.

*Note:* Please ensure that you replace the placeholders in the `.env` file with the actual values that correspond to your environment. It's crucial to keep this file secure, as it contains sensitive configuration details that are essential for the proper functioning of the application.
